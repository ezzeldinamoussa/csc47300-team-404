<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="stats.css" />

  <!-- D3 v3 dependency -->
  <script src="https://d3js.org/d3.v3.min.js"></script>

  <!-- Cal-Heatmap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.css" />
  <script src="https://cdn.jsdelivr.net/cal-heatmap/3.3.10/cal-heatmap.min.js"></script>

  <title>Stats</title>
</head>
<body>
  <header class="page-header">
    <nav class="nav-left">
      <a href="index.html" class="nav-button">Home</a>
      <a href="tasks.html" class="nav-button">Tasks</a>
      <a href="friends.html" class="nav-button">Friends</a>
    </nav>
    <a href="index.html" class="logo">
      <img src="images/purple-logo.png" alt="Streak Quest Logo" />
    </a>
    <nav class="nav-right">
      <a href="task-history.html" class="nav-button">History</a>
      <a href="stats.html" class="nav-button active">Stats</a>
      <a href="index.html" class="nav-button">Logout</a>
    </nav>
  </header>

  <main class="app-container">
    <h1>Stats</h1>

    <div class="stats-grid">

      <!-- Top card: user info -->
      <div class="stat-card" id="user-card">
        <div class="user-info">
          <div class="username">
            <h2 id="username">Loading...</h2>
          </div>
          <div class="user-stats">
            <div class="user-stat">
              <p class="stat-label">Total Stats Completed</p>
              <p class="stat-value" id="total-stats-completed">Loading...</p>
            </div>
            <div class="user-stat">
              <p class="stat-label">Total Stats Started</p>
              <p class="stat-value" id="total-stats-started">Loading...</p>
            </div>
            <div class="user-stat">
              <p class="stat-label">Current Streak</p>
              <p class="stat-value" id="current-streak">Loading...</p>
            </div>
            <div class="user-stat">
              <p class="stat-label">Highest Streak</p>
              <p class="stat-value" id="highest-streak">Loading...</p>
            </div>
          </div>
        </div>
      </div>



      <!-- Middle cards -->
      <div class="stat-card">
        <h2>Total Days Completed</h2>
        <p id="days-completed" class="value">Loading...</p>
      </div>
      <div class="stat-card">
        <h2>Tasks Missed</h2>
        <p id="tasks-missed" class="value">Loading...</p>
      </div>
      <div class="stat-card">
        <h2>Current Points</h2>
        <p id="current-points" class="value">Loading...</p>
      </div>

      <!-- Calendar heatmap card -->
      <div class="stat-card" id="calendar-card">
        <h2>Activity Calendar</h2>
        <div id="cal-heatmap" class="calendar-container"></div>
      </div>

    </div>
  </main>

  <script type="module" src="../dist/frontend/stats.js"></script>
</body>
</html>
